<!doctype html>
<html lang="es">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Papelería Creativa - Envío de formulario con Fetch y FormSubmit</title>
<link rel="stylesheet" href="../ejercicios-javascript/css/styles.css">
    <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">

</head>

<body>

    <div class="container p-5">
        <main>
       
      
       <form class="contact-form">
        <legend>Envíanos tus comentarios</legend>
        <input type="text" name="name" placeholder="Escribe tu nombre" title="Nombre sólo acepta letras y espacios en blanco" required>
        <input type="email" name="email" placeholder="Escribe tu email" title="Email incorrecto" required>
        <input type="text" name="subject" placeholder="Asunto a tratar" title="El asunto es requerido" required>
    <textarea name="comments" cols="50" rows="5" placeholder="Escribe tus comentarios" title="Tu comentario no debe exceder los 255 carcateres" data-pattern="^.{1,255}$" required></textarea>

    <input type="submit" value="Enviar">
    


</form>
        </main>
      

        <script>
            //Envío formulario con Fetch 


const d = document;

function contactForm(){
    const $form = d.querySelector(".contact-form"),
    $inputs = d.querySelectorAll(".contact-form [required");
}

//console.log($inputs)

$inputs.forEach((input)=> {

    const $span = d.createElement("span");
    $span.id = input.name;
    $span.textContent = input.title;
    $span.classList.add("contact-form-error", "none");
    input.insertAdjacentElement("afterend", $span);
    
});


d.addEventListener("keyup", (e) =>{
    if(e.target.matches(".contact-form [required]")){
        let $input = e.target, 
        pattern = $input.pattern || $input.dataset.pattern;
    }
})

d.addEventListener("submit", (e) =>{
    alert("Enviando Formulario");


const $loader = d.querySelector(".contact-form-loader"),
$response = d.querySelector(".contact-form-response");

$loader.classList.remove("none");

setTimeout(() =>{
    $loader.classList.add("none");
    $response.classList.remove("none");
    $form.reset();

    setTimeout(() => $response.classList.add("none"), 3000);
}, 3000);
});

d.addEventListener("DOMContentLoaded", contactForm)
        </script>
 
      </div>
  

    <!-- miJavaScript -->
<script src="../ejercicios-javascript/js/main.js"></script>
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
  

</body>

</html>